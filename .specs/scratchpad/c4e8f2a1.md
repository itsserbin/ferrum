# Research Scratchpad: Rust Terminal Emulator Crate Ecosystem 2026

Task: User request for terminal emulator crate ecosystem research
Created: 2026-02-15

---

## Problem Definition

### Research Questions
Primary:
- Is there a higher-level terminal crate that provides ready-made Terminal with grid, parser, scrollback?
- What glyph caching/atlasing crates exist and which would simplify font rendering vs manual fontdue?
- Are there better alternatives to portable-pty as of Feb 2026?

Secondary:
- Color handling crates for terminal palettes?
- Scrollback buffer crates or patterns?
- Input handling crates for key → escape sequence conversion?
- Unicode width handling for CJK characters?
- Performance profiling crates?
- Any new notable terminal emulator crates in 2025-2026?

### Context & Constraints
Tech Stack (from Cargo.toml and architecture):
- winit 0.30 — window + events
- softbuffer 0.4 — CPU pixel rendering
- fontdue 0.9 — font rasterization
- portable-pty 0.9.0 (user said 0.8 but Cargo.toml shows 0.9)
- vte parser for escape codes (user mentioned 0.15, existing research shows 0.13)
- anyhow 1 — error handling
- Planned: wgpu 28, serde 1 + toml 1 + dirs 6

Project Patterns:
- Learning project — wants to understand internals, not just use black box
- One process, multiple windows, multiple tabs
- Threads + channels (std::sync::mpsc), NOT async
- CPU rendering first (softbuffer), GPU later (wgpu)
- Cross-platform: Linux/macOS/Windows

### Success Criteria
- [ ] Find and evaluate 3+ alternatives for each category
- [ ] Note exact crate versions (latest as of Feb 2026)
- [ ] Document trade-offs: simplicity vs learning vs dependency weight
- [ ] Assess maturity and maintenance status
- [ ] Verify compatibility with existing stack
- [ ] Distinguish "battle-tested production" from "experimental"
- [ ] For each recommendation, note if it's appropriate for a LEARNING project

---

## Research Log

### Entry 1: Higher-level terminal crates
THOUGHT: Check if there are production-ready terminal crates that provide grid + parser + scrollback
ACTION: Search[alacritty_terminal crate rust 2026], Search[termwiz rust crate terminal grid 2026]
OBSERVATION:
- **alacritty_terminal 0.19.0+**: Library for writing terminal emulators. Provides grid, PTY management, event loop. Part of Alacritty. Uses Rust edition 2024.
- Source: https://crates.io/crates/alacritty_terminal, https://docs.rs/alacritty_terminal/
- **termwiz 0.23.3** (10 months old): Part of WezTerm. Provides terminal attributes, True Color, Hyperlinks, sixel/iterm graphics. Supports Windows PTY + legacy console APIs.
- Source: https://crates.io/crates/termwiz, https://github.com/wezterm/wezterm/tree/main/termwiz
- **par-term-emu-core-rust**: NEW crate. VT100/VT220/VT320/VT420/VT520 support with PTY and Sixel/iTerm2/Kitty graphics.
- Source: https://crates.io/crates/par-term-emu-core-rust
- Confidence: High (crates.io + official repos)
- New Question: Are these too high-level for a learning project?

### Entry 2: Glyph caching/atlasing crates
THOUGHT: Check alternatives to manual fontdue for font rendering with caching
ACTION: Search[glyph_brush rust crate 2026], Search[cosmic-text rust font shaping 2026], Search[swash rust font rasterization 2026]
OBSERVATION:
- **glyph_brush 0.7.12** (released 2025-02-21): Fast GPU cached text rendering using ab_glyph. Maintains GPU texture atlas dynamically. Render API agnostic.
- Source: https://crates.io/crates/glyph_brush, https://github.com/alexheretic/glyph-brush
- **cosmic-text 0.14.2** (latest as of 2025): Pure Rust multi-line text handling. Uses rustybuzz for shaping, swash for rendering. Supports ligatures, color emoji, bidirectional text, font fallback.
- Source: https://crates.io/crates/cosmic_text, https://github.com/pop-os/cosmic-text
- **swash**: Font introspection, complex text shaping, glyph rendering. Used internally by cosmic-text. ~10-20% faster than FreeType/Harfbuzz.
- Source: https://github.com/dfrg/swash
- Confidence: High
- New Question: cosmic-text is comprehensive but may be overkill. glyph_brush is GPU-focused. What's best for learning CPU rendering first?

### Entry 3: Comparison fontdue vs swash vs cosmic-text
THOUGHT: Need to understand which is appropriate for learning project
ACTION: Search[fontdue vs swash vs cosmic-text rust comparison]
OBSERVATION:
- **fontdue**: Simplest. Fastest rasterization. Does NOT tackle shaping. Pure rasterization only.
- **swash**: More complete. Font introspection + shaping + rendering.
- **cosmic-text**: Most complete. Full text engine with shaping, layout, font discovery, bidirectional text, emoji.
- Recommendation from sources: "If you need a more complete font engine you should check out Cosmic Text rather than fontdue."
- For LEARNING: fontdue is appropriate because it's focused on one task (rasterization). cosmic-text abstracts too much.
- Confidence: High
- Source: https://github.com/mooman219/fontdue, https://github.com/pop-os/cosmic-text, https://github.com/dfrg/swash

### Entry 4: portable-pty alternatives
THOUGHT: Check if there are better/newer PTY crates as of 2026
ACTION: Search[portable-pty rust alternatives pty-process nix 2026]
OBSERVATION:
- **portable-pty 0.9.0** (current version, 7-11 months old): Cross-platform, trait-based design allows runtime selection of implementations. Part of WezTerm.
- Source: https://crates.io/crates/portable-pty, https://lib.rs/crates/portable-pty
- **nix crate**: Provides raw PTY bindings. Lower level, Unix-only. Functions: openpty, forkpty, etc.
- Source: https://docs.rs/nix/latest/nix/pty/
- Verdict: portable-pty is still the best for cross-platform learning project. nix is lower-level and Unix-specific.
- Confidence: High

### Entry 5: Color handling crates
THOUGHT: Check if there's a crate for terminal color palettes instead of hardcoding 16 colors
ACTION: Search[terminal color palette rust crate ansi 256 colors]
OBSERVATION:
- **ansi_colours**: Converts 24-bit sRGB ↔ 8-bit ANSI palette (256 colors). Useful for approximating true colors to terminal palette.
- Source: https://crates.io/crates/ansi_colours, https://github.com/mina86/ansi_colours
- **ansi_term**: Controls colors and formatting. Supports Colour::Fixed variant for 256-color palette.
- Source: https://crates.io/crates/ansi_term, https://github.com/ogham/rust-ansi-term
- **r3bl_ansi_color**: Generate ANSI 256 (8-bit) and truecolor (24-bit) output.
- Source: https://crates.io/crates/r3bl_ansi_color
- Verdict: ansi_colours is good for palette conversion. ansi_term is higher-level (styling text).
- For terminal emulator: You want hardcoded RGB values for 16 basic colors + formulas for 256-color cube. Crates are for emitting ANSI codes, not for a terminal emulator itself.
- Confidence: High
- Conclusion: Not needed. Terminal emulator should hardcode color palettes.

### Entry 6: Unicode width handling
THOUGHT: Check if unicode-width is necessary for CJK character support
ACTION: Search[unicode-width rust crate CJK wide character terminal 2026]
OBSERVATION:
- **unicode-width**: Determines displayed width of char and str according to UAX#11 rules. #![no_std].
- "cjk" feature (enabled by default): Provides width_cjk() for CJK contexts. Characters with East_Asian_Width of Fullwidth or Wide have width 2.
- Limitations: "The computed width values may not match the actual rendered column width."
- Source: https://crates.io/crates/unicode-width, https://github.com/unicode-rs/unicode-width
- Verdict: YES, absolutely needed for proper terminal grid handling. Without it, CJK characters won't align correctly in grid.
- Confidence: High

### Entry 7: Performance profiling
THOUGHT: Check if tracing crate is recommended for performance debugging
ACTION: Search[rust tracing crate performance profiling terminal 2026]
OBSERVATION:
- **tracing**: Application-level tracing/logging. Maintained by Tokio project. Does NOT require tokio runtime.
- **tracing-perf**: Reports performance metrics through tracing.
- **tracing-tracy**: Integration with Tracy profiler (Linux-only). Nanosecond-precision graphical interface.
- Source: https://github.com/tokio-rs/tracing, https://docs.rs/tracing
- Verdict: tracing is useful but adds overhead. For learning project, start simple. Add tracing later if needed.
- Confidence: High

### Entry 8: Input handling - crossterm
THOUGHT: Check if crossterm provides key → escape sequence conversion
ACTION: Search[crossterm rust terminal input keyboard escape sequences 2026]
OBSERVATION:
- **crossterm**: Cross-platform terminal manipulation. Abstracts key events so you don't need to remember escape sequences (e.g., Arrow Up = 27[A).
- Provides raw mode support. Supports keyboard enhancement features (CSI-u sequences).
- Source: https://github.com/crossterm-rs/crossterm, https://docs.rs/crossterm/
- For terminal emulator: crossterm is for APPLICATIONS using terminals, not for building terminal emulators.
- You need the REVERSE mapping: Key event → escape sequence bytes to send to PTY.
- Verdict: NOT applicable. You need manual key_to_bytes() function for terminal emulator.
- Confidence: High

### Entry 9: Scrollback buffer patterns
THOUGHT: Check best practices for scrollback implementation
ACTION: Search[rust terminal scrollback ring buffer VecDeque best practices]
OBSERVATION:
- **VecDeque**: Double-ended queue with O(1) amortized inserts/removals from both ends. Implemented as growable ring buffer.
- Pattern: push_back() to add new lines, pop_front() to remove old lines when buffer reaches capacity.
- Note: Elements not necessarily contiguous in memory. Use make_contiguous() if needed.
- **fixed-vec-deque**: Zero-allocation fixed-size ring buffer. Requires size at construction.
- Source: https://doc.rust-lang.org/std/collections/struct.VecDeque.html, https://github.com/udoprog/fixed-vec-deque
- Verdict: VecDeque is perfect for scrollback. Simple, battle-tested, growable.
- Confidence: High

### Entry 10: Check latest crate versions
THOUGHT: Verify exact latest versions as of Feb 2026
ACTION: Search version info for key crates
OBSERVATION:
- vte: 0.15.0 (latest)
- portable-pty: 0.9.0 (7-11 months old, still current)
- alacritty_terminal: 0.19.0 (synchronized with alacritty main app)
- cosmic-text: 0.14.2 (latest, actively maintained)
- glyph_brush: 0.7.12 (released 2025-02-21, actively maintained)
- termwiz: 0.23.3 (10 months old)
- Confidence: High (from crates.io)

---

## Technical Analysis

[Full analysis moved to separate section - see below]
